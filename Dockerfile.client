  
FROM node:16 as build

WORKDIR /app

COPY . /app

RUN npm ci
RUN npm run build

FROM caddy:2-alpine

WORKDIR /app
COPY --from=build /app/dist /app/dist
COPY ./Caddyfile /etc/caddy/Caddyfile
